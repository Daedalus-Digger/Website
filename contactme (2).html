<!DOCTYPE html>
<html lang="en">
<head>
<title>Franklin McCullough::Contact Me</title>
<link href="final3.css" rel="stylesheet">
<meta charset="utf-8">
<link rel="icon" type="image/x-icon" href="hair2electricboogaloo.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div id="wrapper">
  <header>
    <h1><a href="index.html">Let me be Frank with You</a></h1>
  </header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="projects.html">Projects</a></li>
      <li><a href="certifications.html">Certifications</a></li>
      <li><a href="Resume.html">Resume</a></li>
      <li><a href="travel.html">Travel</a></li>
      <li><a href="contactme (2).html">Contact Me</a></li>
    </ul>
  </nav>
  
  <main>
  <h2>Franklin McCullough</h2>
  <h3>Send me a message</h3>
  <p>Required Fields are Marked with asterisk*.</p>
  <form id="contact-form">

    <label for="myfname">Name*</label>
    <input type="text" id="myfname" name="myfname" required="Required">
    
    <label for="myemail">E-mail*</label>
    <input type="text" id="email" name="email" required="Required">
    
    <label for="mycomments">Comment*</label>
    <textarea id="mycomments" name="mycomments" required="Required" rows="2" cols="30">
    </textarea>
    <label for="submit"></label>
    <input type="submit">
  </form>
  <p id="responsemessage"></p>
  <br></br>

  <p> Atul leave a message below</p>
  <h3> Hello franklin!</h3>
  <h6>Added Snyk code review.</h6>
  
    <script>
  const apiKey = "my-secret-key-123"; // exposed key
    </script>
    
</main>
  <footer>
  Copyright &copy; 2023 Franklin McCullough<br>
  <a href="mailto:fmccull2@gmail.com">fmccull2@gmail.com</a>
  </footer>
</div>

<script>
  document.getElementById("contact-form").addEventListener("submit", async function (e) {
    e.preventDefault(); // Prevent default form submit

    // Collect form values
    const name = document.getElementById("myfname").value.trim();
    const email = document.getElementById("email").value.trim();
    const comments = document.getElementById("mycomments").value.trim();

    // Prepare JSON payload
    const payload = {
      name: name,
      email: email,
      comments: comments
    };

    try {
      const response = await fetch("https://oepko6iuv0.execute-api.us-east-1.amazonaws.com/default/SES-Invocation", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      });

      const data = await response.json();
      document.getElementById("responsemessage").textContent = data.message || "Message sent!";
    } catch (error) {
      console.error("Error:", error);
      document.getElementById("responsemessage").textContent = "An error occurred. Please try again later.";
    }
  });
</script>

</body>
</html>
